name: lab
topology:
  nodes:
    router1:
      binds:
      - configs/router1.txt:/conf.txt
      - configs/setup-router1.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
    router2:
      binds:
      - configs/router2.txt:/conf.txt
      - configs/setup-router2.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
    router3:
      binds:
      - configs/router3.txt:/conf.txt
      - configs/setup-router3.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
    router4:
      binds:
      - configs/router4.txt:/conf.txt
      - configs/setup-router4.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
    router5:
      binds:
      - configs/router5.txt:/conf.txt
      - configs/setup-router5.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
    router6:
      binds:
      - configs/router6.txt:/conf.txt
      - configs/setup-router6.sh:/setup.sh
      exec:
      - chmod +x setup.sh
      - sh ./setup.sh
      image: registry.forge.uclouvain.be/linfo2142/containers/frr:v0.1
      kind: linux
  links:
    - endpoints:
      - router1:eth1
      - router2:eth1
    - endpoints:
      - router1:eth2
      - router3:eth1
    - endpoints:
      - router2:eth2
      - router3:eth2
    - endpoints:
      - router2:eth3
      - router4:eth1
    - endpoints:
      - router2:eth4
      - router5:eth1
    - endpoints:
      - router3:eth3
      - router6:eth1
